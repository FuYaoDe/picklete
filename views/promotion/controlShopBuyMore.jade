extends ../_layout_auth
include ../mixins/pagination

block body
  h2.m-bottom-6 加價購
  a.btn.btn-danger.btn-lg.m-bottom-6(href='shop-buy-more-add-item') 建立加價購
  ul.nav.nav-tabs.m-bottom-4
    li.active
      a#a-tab1(href='#tab-1', data-toggle='tab') 不限金額
    li
      a#a-tab2(href='#tab-2', data-toggle='tab') 限滿 1,500 元
  // /nav
  #tab-container.tab-content(data-tab-status=query.tabStatus?query.tabStatus:'')
    #tab-1.tab-pane.fade.in.active
      .row
        .col-sm-6.col-md-8
          form.form-inline
            .form-group
              label 顯示
              +pagination-limit(limit)
              label 筆資料（共 #{totalRows} 筆）
            // /form-group
        // /col-sm-6
        .col-sm-6.col-md-4
          form.with-pagination(name="searchNoLimit", action="/admin/shop-buy-more", method="get")
            input(type='hidden', name='limitTab', value=limitTab? limitTab: '')
            +pagination-fields(page, totalPages, limit)
            .input-group
              input.form-control(name='keyword', type='text', placeholder='Search for...', value='#{query.keyword}')
              span.input-group-btn
                button.btn.btn-default.p-left-2.p-right-2(type='button', onClick='$("form[name=\'searchNoLimit\']").submit()')
                  span.glyphicon.glyphicon-search
            // /input-group
        // /col-sm-6
      // /row
      hr.dashed-line
      table.table.table-striped
        thead
          tr
            th 主圖
            th 商品名稱
            th 貨號
            th 售價
            th 特價
            th 折扣
            th 時間
            th
        tbody
          each purchase in additionalPurchaseNoLimit.rows
            tr
              td
                img.width-6(src='#{purchase.ProductGms[0].coverPhoto[0]}')
              td #{purchase.name}
              td #{purchase.id}
              td 590
              td
                span.text-danger 490
              td #{purchase.discount}
              td
                | #{sails.moment(purchase.startDate).format('YYYY/MM/DD')}
                br
                | #{sails.moment(purchase.endDate).format('YYYY/MM/DD')}
              td.text-right
                a.btn.btn-link(href='../admin/shop-buy-more-add-item?keyword='+ purchase.name)
                  span.glyphicon.glyphicon-pencil2
                a.btn.btn-link.delete-link(href='#', data-toggle='modal', data-target='#modal-delete')
                  span.glyphicon.glyphicon-remove
      hr.dashed-line
      +pagination-simple-pager(page, totalPages)
      
    #tab-2.tab-pane.fade
      .row
        .col-sm-6.col-md-8
          form.form-inline
            .form-group
              label 顯示
              +pagination-limit(limit)
              label 筆資料（共 #{limitTotalRows} 筆）
            // /form-group
        // /col-sm-6
        .col-sm-6.col-md-4
          form.with-pagination(name="searchLimit", action="/admin/shop-buy-more", method="get")
            input(type='hidden', name='limitTab', value=limitTab? limitTab: '')
            +pagination-fields(limitPage, limitTotalPages, limit)
            .input-group
              input.form-control(type='text', placeholder='Search for...')
              span.input-group-btn
                button.btn.btn-default.p-left-2.p-right-2(type='button')
                  span.glyphicon.glyphicon-search
          // /input-group
        // /col-sm-6
      // /row
      hr.dashed-line
      table.table.table-striped
        thead
          tr
            th 主圖
            th 商品名稱
            th 貨號
            th 售價
            th 特價
            th 折扣
            th 時間
            th
        tbody
          each purchase in additionalPurchaseLimit.rows
            tr
              td
                img.width-6(src='#{purchase.ProductGms[0].coverPhoto[0]}')
              td #{purchase.name}
              td #{purchase.id}
              td 590
              td
                span.text-danger 490
              td #{purchase.discount}
              td
                | #{sails.moment(purchase.startDate).format('YYYY/MM/DD')}
                br
                | #{sails.moment(purchase.endDate).format('YYYY/MM/DD')}
              td.text-right
                a.btn.btn-link(href='../admin/shop-buy-more-add-item?keyword='+ purchase.name)
                  span.glyphicon.glyphicon-pencil2
                a.btn.btn-link.delete-link(href='#', data-toggle='modal', data-target='#modal-delete')
                  span.glyphicon.glyphicon-remove
      hr.dashed-line
      +pagination-simple-pager(limitPage, limitTotalPages)
block js
  script(src='/javascripts/admin/controlShopBuyMore.js')
  script(src='/javascripts/common/pagination.js')
